#!/bin/sh

set -e

package="$1"

if [ -z "$package" ]; then
  echo "Usage: $0 <package name>"
  exit 1
fi
shift

# development
invocation="cargo run --package $package --"

if ! test -z "$FAST"; then
  invocation="target/release/$package"
  if ! test -f "$invocation"; then
    time cargo build --release --package $package
  fi
fi

$invocation "$@"

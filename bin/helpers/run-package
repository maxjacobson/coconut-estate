#!/bin/sh

set -e

package="$1"

if [ -z "$package" ]; then
  echo "Usage: $0 <package name>"
  exit 1
fi
shift

# development
invocation="cargo run --package $package --"

# This just lets you skip the compilation step if you know the source code hasn't changed
if ! test -z "$FAST"; then
  invocation="target/debug/$package"
  if ! test -f "$invocation"; then
    cargo build --quiet --package $package
  fi
fi

$invocation "$@"
